<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>The Occult Reference Net</title>

<!-- Retro pixel font for site + Player 2 for buttons -->
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&family=Player+2&display=swap" rel="stylesheet">

<style>
  :root{
    --bg:#000; --fg:#fff; --muted:#bbb; --accent:#00ff99; --border:#333;
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{
    margin:0; background:var(--bg); color:var(--fg);
    font-family:"Press Start 2P",monospace; font-size:12px; line-height:1.45;
    display:flex; flex-direction:column; position:relative; overflow-x:hidden;
  }

  /* === CRT overlay (scanlines + gentle flicker) ========================== */
  body::before,
  body::after{
    content:""; position:fixed; inset:0; pointer-events:none; z-index:9999;
  }
  body::before{
    background:
      linear-gradient(rgba(0,255,153,0.06), rgba(0,255,153,0.06)) 0 0/100% 100%,
      repeating-linear-gradient(0deg,
        rgba(0,255,153,0.08) 0px,
        rgba(0,255,153,0.08) 1px,
        rgba(0,0,0,0)        2px,
        rgba(0,0,0,0)        4px);
    mix-blend-mode:screen;
    animation:scan-flicker 6s infinite linear;
  }
  body::after{
    box-shadow:
      inset 0 0 120px rgba(0,255,153,0.12),
      inset 0 0 280px rgba(0,255,153,0.08);
  }
  @keyframes scan-flicker{
    0%   { opacity:.22 }
    45%  { opacity:.28 }
    50%  { opacity:.20 }
    55%  { opacity:.28 }
    100% { opacity:.22 }
  }
  /* ====================================================================== */

  a{color:var(--accent); text-decoration:none}
  a:hover{text-decoration:underline}

  /* Header title */
  .title{
    margin:28px 12px 10px; text-align:center;
    font-size:clamp(22px,5vw,46px); letter-spacing:2px;
    text-shadow:0 0 8px rgba(0,255,153,.2);
  }

  /* Centered logo */
  .logo-wrap{display:flex; justify-content:center; margin:10px 0 18px}
  .logo{
    width:min(520px,80vw); height:auto; image-rendering:pixelated; image-rendering:crisp-edges;
    filter: drop-shadow(0 0 18px rgba(0,0,0,.6));
  }

  /* Search row centered */
  .search-wrap{
    display:flex; justify-content:center; align-items:center; gap:12px;
    margin:6px auto 12px; padding:0 16px; width:100%;
  }
  .label{font-size:14px; color:var(--fg)}
  .field{
    display:flex; align-items:stretch; gap:0;
    border:2px solid var(--fg); background:#111;
  }
  input[type="search"]{
    width:min(560px,70vw); padding:12px 14px; border:0; outline:none;
    background:#fff; color:#000; font-family:inherit; font-size:12px;
  }
  button{
    background:#222; color:#fff; border:0; width:42px; padding:0 0; cursor:pointer;
    border-left:2px solid var(--fg);
  }
  button:active{transform:translateY(1px)}
  .mag{display:inline-block; width:100%; height:100%; font-size:16px}
  .mag::before{content:"\1F50D"; display:block; line-height:42px; text-align:center}

  /* NEW: Player 2 button bar */
  .btnbar{
    display:flex; justify-content:center; gap:12px;
    margin:8px auto 24px; padding:0 16px; flex-wrap:wrap;
  }
  .btn{
    font-family:"Player 2", system-ui, sans-serif; /* only buttons use Player 2 */
    letter-spacing:.5px;
    background:#000; color:var(--accent);
    border:2px solid var(--accent);
    padding:10px 18px; border-radius:6px; cursor:pointer;
    text-decoration:none; display:inline-block; font-size:14px;
    transition:transform .05s ease, box-shadow .15s ease, background .15s ease, color .15s ease;
    box-shadow:0 0 0 rgba(0,255,153,0);
  }
  .btn:hover{
    background:var(--accent); color:#000; text-decoration:none;
    box-shadow:0 0 18px rgba(0,255,153,.45);
    transform:translateY(-1px);
  }
  .btn:active{ transform:translateY(1px) }

  /* Results area */
  .results{
    max-width:960px; width:92vw; margin:0 auto 32px; display:grid; gap:12px;
  }
  .card{border:1px solid var(--border); padding:14px; background:#000}
  .src{color:var(--accent); font-size:10px; margin-bottom:6px}
  .titlelink{color:var(--accent); text-decoration:underline}
  .snippet{color:var(--accent); margin-top:4px}

  /* Footer line */
  footer{margin-top:auto; padding:18px 10px; text-align:center; color:var(--muted); border-top:1px solid var(--border)}
  .small{font-size:10px}

  @media (max-width:520px){
    .title{font-size:22px}
    .label{display:none} /* save space on tiny screens */
  }
</style>
</head>
<body>

  <div class="title">The Occult Reference Net</div>

  <div class="logo-wrap">
    <!-- Put GB-Logo_TORN.png in the SAME folder as index.html -->
    <img src="GB-Logo_TORN.png" alt="Ghostbusters pixel logo" class="logo">
  </div>

  <div class="search-wrap">
    <div class="label">Search:</div>
    <div class="field">
      <input id="q" type="search" placeholder="TYPE SEARCH TERMS…">
      <button id="go" aria-label="Search"><span class="mag" aria-hidden="true"></span></button>
    </div>
  </div>

  <!-- NEW Button bar (Player 2 font) -->
  <div class="btnbar" role="navigation" aria-label="Secondary">
    <a class="btn" href="https://www.theoccultreference.net/" target="_blank" rel="noopener">About</a>
    <a class="btn" href="https://www.theoccultreference.net/" target="_blank" rel="noopener">Contact</a>
    <a class="btn" href="https://www.theoccultreference.net/" target="_blank" rel="noopener">Sponsors</a>
    <a class="btn" href="https://www.theoccultreference.net/" target="_blank" rel="noopener">Forum</a>
  </div>

  <div id="results" class="results"></div>

  <footer>
    <div class="small">Helping paranormal investigators everywhere find the things that go bump in the night since © 1989.</div>
  </footer>

  <!-- Client-side search (FlexSearch) -->
  <script src="https://unpkg.com/flexsearch/dist/flexsearch.bundle.js"></script>
  <script>
    let data=[], index;

    async function load(){
      const r=await fetch("index.json",{cache:"no-store"});
      data=await r.json();
      index = new FlexSearch.Document({
        document: { id: "id", index: ["title","snippet","author","tags"] },
        tokenize:"forward"
      });
      for(const d of data) index.add(d);
    }

    async function run(query){
      const q = query !== undefined ? query.trim() : document.getElementById('q').value.trim();
      const box=document.getElementById('results');
      if(!index) await load();
      if(!q){ box.innerHTML=""; return; }
      const results = index.search(q,{enrich:true});
      const ids = [...new Set(results.flatMap(r => r.result))];
      const hits = ids.map(id => data.find(d => d.id===id)).filter(Boolean).slice(0,50);
      box.innerHTML = hits.length ? "" : "<div class='card'>No results. Try broader terms.</div>";
      for(const h of hits){
        const el=document.createElement('div'); el.className="card";
        el.innerHTML = `
          <div class="src">${h.collection||h.source} · ${h.type||"page"}</div>
          <a class="titlelink" href="${h.url}" target="_blank" rel="noopener">${h.title}</a>
          <div class="snippet">${h.snippet||""}</div>
          <div class="src">${h.author?`author: ${h.author} · `:""}${h.year?`year: ${h.year}`:""}</div>`;
        box.appendChild(el);
      }
    }

    document.getElementById('go').onclick = () => run();
    document.getElementById('q').addEventListener('keydown', e => { if(e.key==="Enter") run(); });

    // Run default search on page load
    window.addEventListener('DOMContentLoaded', () => {
      const defaultQuery = "Are you the Keymaster?";
      document.getElementById('q').value = defaultQuery;
      run(defaultQuery);
    });
  </script>
</body>
</html>

