<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Forum – The Occult Reference Net</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<style>
  body {
    background: black;
    color: white;
    font-family: 'Press Start 2P', monospace;
    margin: 0;
    padding: 0;
  }
  header {
    padding: 20px;
    text-align: center;
    font-size: 1em;
  }
  .home-btn {
    display: inline-block;
    margin-top: 8px;
    padding: 8px 12px;
    border: 1px solid white;
    text-decoration: none;
    color: white;
    font-size: 0.8em;
  }
  .home-btn:hover {
    background: white;
    color: black;
  }
  .post {
    border-bottom: 1px solid #444;
    padding: 15px;
  }
  .post a {
    color: #0ff;
    text-decoration: none;
  }
  .post a:hover {
    text-decoration: underline;
  }
  .post .meta {
    font-size: 0.6em;
    color: #aaa;
    margin-top: 4px;
  }
</style>
</head>
<body>

<header>
  Forum – The Occult Reference Net
  <br>
  <a class="home-btn" href="index.html">Home</a>
</header>

<main id="posts"></main>

<script>
const WORKER_BASE = "https://orn-reddit-proxy.amhogsx.workers.dev";
const SUBREDDIT = "TheOccultReferenceNet";
const LIMIT = 10;

async function loadReddit() {
  try {
    const res = await fetch(`${WORKER_BASE}/r/${SUBREDDIT}/hot.json?limit=${LIMIT}`);
    const data = await res.json();
    const posts = data.data.children;
    const container = document.getElementById("posts");
    container.innerHTML = posts.map(p => {
      const post = p.data;
      return `
        <div class="post">
          <a href="https://www.reddit.com${post.permalink}" target="_blank" rel="noopener">
            ${post.title}
          </a>
          <div class="meta">
            ${post.ups} upvotes • Posted by u/${post.author}
          </div>
        </div>
      `;
    }).join("");
  } catch (err) {
    document.getElementById("posts").innerHTML = `<p>Failed to load posts.</p>`;
    console.error(err);
  }
}

loadReddit();
</script>

</body>
</html>
