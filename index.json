[
  {
    "url": "https://embassyofthefreemind.com/en/library/online-catalogue/",
    "title": "Embassy of the Free Mind – Online Catalogue",
    "snippet": "Browse Hermetic and esoteric works digitized by the Embassy of the Free Mind library.",
    "collection": "Embassy of the Free Mind",
    "author": "",
    "year": "",
    "tags": ["hermetic","esoterica","digitized"]
  },
  {
    "url": "https://www.occultlibrary.org/community/resources",
    "title": "OccultLibrary.org – Community Resources",
    "snippet": "Community-maintained resources, references, and links related to the occult.",
    "collection": "Occult Library",
    "author": "",
    "year": "",
    "tags": ["occult","resources"]
  },
  {
    "url": "https://digitaloccultlibrary.commons.gc.cuny.edu/",
    "title": "CUNY Digital Occult Library",
    "snippet": "A CUNY Commons project collecting digitized occult and esoteric materials.",
    "collection": "CUNY Digital Occult Library",
    "author": "",
    "year": "",
    "tags": ["cuny","digital","occult"]
  },
  {
    "url": "https://rmc.library.cornell.edu/witchcraftcoll/",
    "title": "Cornell Witchcraft Collection",
    "snippet": "Rare and digitized materials documenting witchcraft, demonology, and superstition.",
    "collection": "Cornell University Library",
    "author": "",
    "year": "",
    "tags": ["witchcraft","cornell","history"]
  }
]
<script>
/* Replace your existing resultHTML with this */
function resultHTML(h){
  // Badges (PDF, filesize, dates)
  const badges = [];
  if (h.is_pdf) badges.push(`<span class="badge pdf">PDF</span>`);
  if (h.filesize) badges.push(`<span class="badge">${fmtBytes(h.filesize)}</span>`);
  if (h.pub_date) badges.push(`<span class="badge">${h.pub_date}</span>`);
  if (!h.pub_date && h.lastmod) badges.push(`<span class="badge">${h.lastmod}</span>`);

  // Optional thumbnail + keywords (from enriched crawler)
  const thumb = h.thumb
    ? `<img class="thumb" src="${h.thumb}" alt="" loading="lazy" referrerpolicy="no-referrer">`
    : "";

  const tags = (h.tags && h.tags.length)
    ? `<div class="tagline">Keywords: ${h.tags.slice(0,8).join(", ")}</div>`
    : "";

  // Card HTML (no source/domain/collection shown)
  return `
    <div class="result">
      <div class="titleline">
        <a class="result-title" href="${h.url}" target="_blank" rel="noopener">${h.title || h.url}</a>
        ${badges.join(" ")}
      </div>
      ${thumb}
      <div class="snippet">${h.snippet || ""}</div>
      ${tags}
      <div class="actions">
        <a class="action-btn" href="${h.url}" target="_blank" rel="noopener">Open</a>
        ${h.is_pdf ? `<button class="action-btn preview-btn" data-url="${h.url}" data-title="${encodeURIComponent(h.title||'PDF')}">Preview</button>` : ``}
      </div>
    </div>`;
}
</script>
